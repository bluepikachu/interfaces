# Web 界面设计指南

本文档翻译自 Vercel 的 [Web Interface Guideline](https://vercel.com/design/guidelines)，更新至 2025 年 9 月 19 日版本。

---

界面的成功源于数百个细节决策。这是一个持续更新的、非详尽的决策清单。大多数指南与框架无关，部分专门针对 React/Next.js。[欢迎反馈](https://github.com/vercel-labs/web-interface-guidelines/tree/main)。

---

## 交互

- **所有地方都可用键盘操作。** 所有流程都应支持键盘操作并遵循 [WAI-ARIA 编写规范](https://www.w3.org/WAI/ARIA/apg/patterns/)。
- **清晰的焦点。** 每个可聚焦元素都应游清晰的聚焦环，为了避免干扰鼠标用户，优先使用 `:focus-visible` 而不是 `:focus`。对成组的控件应用 `:focus-within`。
- **管理焦点。** 使用焦点陷阱，根据 [WAI-ARIA 模式](https://www.w3.org/WAI/ARIA/apg/patterns/) 移动和返回焦点。
- **视觉目标和实际点击区域需一致。** 例外：如果视觉目标 < 24px，则需要将点击区域扩展到 ≥ 24px。在移动端，最小尺寸是 44px。
- **移动端输入尺寸。** 移动端`<input>`的字体大小需要 ≥ 16px，避免 iOS Safari 在聚焦时自动缩放/平移，或设置 `<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />`来避免。
- **尊重缩放。** 永远不要禁用浏览器缩放功能。
- **水合安全的输入。** 输入框在「水合」后不能失去焦点或内容。
- **不要禁用粘贴。** 永远不要在 `<input>` 或 `<textarea>` 中禁用粘贴。
- **加载按钮。** 加载状态显示指示器并保留原始标签。
- **最小加载动画时间。**如果显示加载动画/骨架屏，动画至少显示 150–300 毫秒，最短持续 300–500 毫秒以避免闪烁；如 React 的 `<Suspense>` 自动处理。
- **URL 作为状态。** 在 URL 中持久化状态，确保分享、刷新、前进/后退导航正常工作，例如 [nuqs](https://nuqs.47ng.com/)。
- **乐观更新。** 界面可优化更新时，应先乐观更新，服务器响应后再校正；如失败则显示错误并回退或提供撤销。
- **省略号表示进一步输入。** 菜单项如需进一步输入（如“重命名…”）以省略号结尾。
- **确认破坏性操作。** 危险操作需二次确认或提供撤销的安全窗口。
- **控件需禁用双击缩放。** 设置 `touch-action: manipulation`。
- **点击高亮需符合整体设计。** 设置 `webkit-tap-highlight-color`。
- **设计宽容的交互。** 控件通过宽松的点击区域、清晰和可预测的交互来最小化挑剔性，例如[预测锥](https://x.com/JohnPhamous/status/1657083267299028992)。
- **工具提示时机。** 组中第一个工具提示设置延迟；[后续的同组提示无延迟](https://x.com/emilkowalski_/status/1962500739336462340)。
- **过度滚动行为。** 明确设置 `overscroll-behavior: contain`，例如在模态框/抽屉中。
- **滚动位置持久化。** 前进/后退时恢复之前的滚动位置。
- **自动聚焦提速。** 桌面端有主要输入框时可自动聚焦，移动端尽量少用，避免键盘弹出导致布局错乱。
- **没有死区。** 如果控件的某部分看起来可交互，它就应该可交互。不要让用户猜测在哪里交互。
- **深度链接一切。** 任何使用 `useState` 的地方（过滤器、标签页、分页、展开面板等）都支持深链接。
- **干净的拖拽交互。** 在元素被拖拽时禁用文本选择并添加 [`inert`](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Global_attributes/inert)以避免选择和悬停同时触发。
- **链接就是链接。** 链接需要使用 `<a>` 或 `<Link>` ，使标准浏览器行为正常工作（Cmd/Ctrl+点击、中键点击、右键在新标签页中打开）。永远不要用 `<button>` 或 `<div>` 代替链接。
- **提示异步更新。** 异步更新需用 aria-live 友好提示，如 toast 或行内校验。
- **键盘快捷键需要本地化。** 为非 QWERTY 布局的键盘，并显示对应的特定符号。

## 动画

- **支持 `prefers-reduced-motion`。** 提供简化动画的版本。
- **实现偏好。** 推荐优先使用 CSS 实现动画，避免主线程 JavaScript 动画。
  - 偏好：CSS > Web Animations API > Javascript 库，例如 [motion](https://www.npmjs.com/package/motion)。
- **合成器友好。** 优先使用 GPU 加速属性（`transform`、`opacity`），避免触发重排/重绘的属性（`width`、`height`、`top`、`left`）。
- **必要性检查。** 仅在动画能明确因果关系或增加愉悦度时才采用动画，例如[北极光](https://x.com/JohnPhamous/status/1831380516509278561)。
- **缓动适合场景。** 根据变化的内容（大小、距离、触发器）选择合适的缓动参数。
- **可中断。** 动画应可被用户操作中断。
- **输入驱动。** 避免自动播放，动画需要根据操作来响应。
- **正确的变换原点。** 动画远点需要与实际起点对齐。
- **永远不要使用`transition：all`**。明确指定实际需要动画的属性（特别是`opacity`和`transform`），使用`all`可能会意外地对影响布局的属性做动画，从而导致卡顿。
- **跨浏览器 SVG 变换**。对`<g>`包裹的元素应用 CSS 变换/动画，并设置`transform-box: fill-box; transform-origin: center;`。
Safari 在历史上曾在 transform-origin 有过 bug，而通过分组可以避免计算基点的错误。

## 布局

- **光学对齐。** 在视觉感知优先于几何时，可以[微调 ±1px](https://x.com/JohnPhamous/status/1760444698857230360)。
- **有意对齐。** 每个元素都要有意识地对齐；可以是与网格、基线、边界或光学中心对齐，杜绝偶然的定位或排列。
- **锁定组合中的对比平衡。** 当文本与图标并排展示时，应调整它们的粗细、大小、间距或者颜色，避免相互冲突。例如，如果图标线条较细，则在中等粗细的文字旁边应加强图标的线条。
- **响应式覆盖。** 需要验证布局是否在移动设备、笔记本电脑和超宽屏等设备上都表现良好。对于超宽屏，可以缩放到 50% 进行模拟查看。
- **尊重安全区域。** 对于各种设备的凹槽与内边距，要使用[安全区域变量](https://developer.mozilla.org/en-US/docs/Web/CSS/env)进行适配。
- **避免多余的滚动条。** 仅呈现有用的滚动条，修复布局溢出问题，避免出现不必要的滚动条。在 macOS 下将“显示滚动条”设置为“始终显示”以模拟 Windows 下的表现。
- **让浏览器参与尺寸计算。** 鼓励使用 flex/grid/intrinsic 布局而非 JS 进行尺寸计算。通过 CSS 实现流式布局、换行与对齐，避免因 JavaScript 介入而产生布局抖动。

## 内容

- **内联帮助优先。** 应优先直接在页面中说明，必要时最后再用 Tooltips。
- **稳定的骨架。** 骨架界面要与最终内容高度一致，避免布局跳动。
- **准确的页面标题。** `<title>` 反映当前页面或内容功能。
- **没有死胡同。** 每个界面都提供下一步操作或恢复机制。
- **所有状态都有设计。** 包括空状态、稀疏、密集和异常状态。
- **印刷引号。** 优先使用弯引号（" "）而不是直引号（" "）。
- **避免孤行/孤字。** 避免段末孤行寡字，注意整齐的换行。
- **对比数字。** 对比用的数字，使用 `font-variant-numeric: tabular-nums` 或等宽字体如 [Geist Mono](https://vercel.com/font)。
- **冗余状态提示。** 不要仅依赖颜色，应包含文字标签。
- **图标需要有标签。** 图标需配有标签，确保无障碍。
- **不要发布结构性标记（Schema）。** 界面布局可以隐藏部分标签，但为无障碍考虑，需有可访问名称/标签。
- **使用省略号字符。** 省略号需用专门字符 `…` 而不是三个句点 `...`。
- **锚定标题。** 锚点标题，跳转链接目标要设置合适的 `scroll-margin-top`。
- **为用户内容有弹性布局。** 布局能承受过短、正常及过长内容。
- **本地化单位。** 日期、时间、数字、分隔符与货币应根据用户本地语言展示。
- **优先用户语言设置而不是地理位置做语言切换。** 基于 `Accept-Language` 头和 `navigator.languages` 检测，不用 IP/GPS。
- **无障碍内容。** 可通过 `aria-label` 准确设置名称，对修饰性元素用 `aria-hidden`，并在[可访问性树](https://developer.chrome.com/blog/full-accessibility-tree)中确认。
- **纯图标按钮有名称。** 为纯图标按钮提供 `aria-label` 描述。
- **语义优于 ARIA。** 之前尽可能使用原生标签（`button`、`a`、`label`、`table`），再补充 `aria-*` 属性。
- **标题和跳转链接。** 分层的 `<h1–h6>` 和"跳转到内容"链接。
- **从 Logo 中获取品牌资源。** 品牌资产应可以通过[右键点击导航标志](https://x.com/JohnPhamous/status/1636427186566762496)获取。
- **粘合术语使用不间断空格。** 短语、单位等使用不间断空格 `&nbsp;`连接，如`10 MB` → `10&nbsp;MB`，`⌘ + K` → `⌘&nbsp;+&nbsp;K`，`Vercel SDK` → `Vercel&nbsp;SDK`。使用 `&NoBreak;` 表示无空格。

## 表单

- **Enter 键提交。** 当文本输入聚焦时，Enter 键应触发表单提交。
- **Textarea 行为。** 在 `<textarea>` 中可通过 ⌘/⌃+Enter 提交，单独按 Enter 则换行。
- **到处都有标签。** 每个控件都需有 `<label>` 或与 Label 关联，兼容辅助技术。
- **标签激活。** 点击 `<label>` 应聚焦关联的控件。
- **提交规则。** 表单提交键应在请求过程中禁用，并显示加载动画及幂等键。
- **不要阻止输入。** 允许任意输入，哪怕字段仅接受数字，也不阻断输入，而是做校验提示。
- **不要预先禁用提交。** 表单不完整时也允许提交，可显示校验反馈。
- **控件上没有死区。** checkbox 和 radio 需与标签共享足够大的点击热区。
- **错误位置。** 错误提示要靠近出错字段，整体提交时聚焦第一个错误。
- **自动完成和名称。** 设置 `autocomplete` 和有意义的 `name` 值以启用自动填充。
- **选择性拼写检查。** 对电子邮件、代码、用户名等应关闭拼写检查。
- **正确的类型和输入模式。** 使用正确的 `type` 和 `inputmode` 以提升键盘体验及校验。
- **占位符表示空白。** 占位符应以省略号结尾。
- **占位符的值。** 将占位符设置为示例值或格式，例如 `+1 (123) 456-7890` 和 `sk-012345679…`
- **未保存的更改。** 有未保存更改时，页面跳转要警告。
- **密码管理器和 2FA。** 兼容和支持粘贴一次性验证码。
- **输入替换和扩展。** 有些输入框会自动添加尾随空格，应修剪值以避免显示令人困惑的错误消息。
- - **非身份认证字段避免唤起密码管理器。** 对类似“搜索”的输入，避免使用保留名称（如“密码”），使用 `autocomplete="off"` 或特定令牌如 `autocomplete="one-time-code"` 用于一次性验证码字段。
- **文本替换和扩展。** 某些输入法会多加空格，应自动修剪输入值。
- **Windows `<select>` 背景。** Windows 下表单控件明确设置 `background-color` 和 `color` 以避免 Windows 上的深色模式对比度错误。

## 性能

- **设备/浏览器矩阵。** 测试 iOS 低电量模式与 macOS Safari。
- **可靠测量。** 性能衡量需关闭会影响结果的扩展。
- **跟踪重新渲染。** 跟踪渲染次数，减少并加速 re-render，可借助 [React DevTools](https://react.dev/learn/react-developer-tools) 或 [React Scan](https://react-scan.com/)。
- **分析限制。** 测试时开启 CPU 和网络限制。
- **最小化布局工作。** 集中读取和写入，避免多次重绘。﻿
- **网络延迟预估。** `POST/PATCH/DELETE` 应在 < 500ms 内完成。
- **按键成本。** 优先无控组件，保证受控组件高效。
- **大列表。** 虚拟化大列表，例如 [virtua](https://github.com/inokawa/virtua) 或者 [content-visibility: auto](https://web.dev/articles/content-visibility)。
- **智能预加载。** 只预加载首屏图像；其余懒加载。
- **没有图像导致的 CLS。** 应为图片设置尺寸并预留空间。
- **预连接到源。** 对资产/CDN 域使用 `<link rel="preconnect">`（需要时使用 crossorigin）以减少 DNS/TLS 延迟。
- **预加载字体。** 对关键文本使用预加载来避免闪烁和布局偏移。
- **子集字体。** 字体只需传用到的字符子集，减少文件体积。
- **主线程避免做重任务。** 移动耗时长的任务到 [Web Workers](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API) 以避免阻塞页面交互。

## 设计

- **分层阴影。** 用至少两层模拟环境光 + 直射光。
- **清晰边框。** 结合边框和阴影，半透明边框可提升边缘效果。
- **嵌套半径。** 子元素圆角不大于父元素，且同心（concentric）以保持对齐。
- **色调一致性。** 在非中性背景上，将边框/阴影/文本向相同色调倾斜。
- **图表的可访问性。** 使用色盲友好的调色板。
- **最小对比度。** 优先使用 [APCA](https://apcacontrast.com/) 而不是 [WCAG 2](https://webaim.org/resources/contrastchecker/) 获得更准确的感知对比度。
- **交互增加对比度。** `:hover`、`:active`、`:focus` 比静止状态有更多对比度。
- **让浏览器 UI 匹配你的背景。** 设置 `<meta name="theme-color" content="#000000">` 以[使浏览器的主题颜色与页面背景对齐](https://x.com/JohnPhamous/status/1816160187839107342)。
- **避免渐变带状现象。** 某些颜色和显示类型会有带状现象。[可以使用蒙版代替](https://x.com/JohnPhamous/status/1724491202148675590)。


---
## Vercel 特定

以下这些偏好反映了 Vercel 的品牌和产品选择，它们不是通用指南。

## 文案写作

- **主动语态。**
  - 不说"CLI 将被安装"，而说"安装 CLI"。
- **标题和按钮使用标题大小写**（[Chicago](https://title.sh/)）。在营销页面上，使用句子大小写。
- **清晰简洁。** 使用尽可能少的词。
- **优先使用 `&` 而不是 `and`。**
- **面向行动的语言。**
  - 不说"你需要 CLI…"而说"安装 CLI…"。
- **保持名词一致。** 引入尽可能少的独特术语。
- **用第二人称写作。** 避免第一人称。
- **使用一致的占位符。**
  - 字符串：`YOUR_API_TOKEN_HERE`。数字：`0123456789`。
- **计数使用数字。**
  - 不说"八个部署"而说"8 个部署"。
- **一致的货币格式。** 在任何给定上下文中，货币显示要么 0 位小数要么 2 位小数，永远不要混合。
- **数字和单位之间用空格分隔。**
  - 不说 `10MB` 而是 `10 MB`。
  - 使用不间断空格，例如 `10&nbsp;MB`。
- **默认积极语言。** 以鼓励、解决问题的语气显示消息，即使是错误提示。
  - 不说"你的部署失败了"，而是"出了点问题，再试一次或联系支持"。
- **错误消息需要指引解决方式。** 不要只说出了什么问题，需要告诉用户如何修复。
  - 不说"无效的 API 密钥"，而是"你的 API 密钥不正确或已过期。在你的账户设置中生成新密钥"，文案和按钮/链接应该教育并给出明确的行动。
- **避免歧义。** 标签需要清晰具体。
  - 不用按钮标签"继续"而说"保存 API 密钥"。

---

## 与代理集成

[AGENTS.md](https://agents.md/) 文件为代理提供指导。将此 AGENTS.md 与你的代理一起使用，确保你的界面遵循这些指南。我们建议审核所有生成的界面。

- [下载 AGENTS.md](https://raw.githubusercontent.com/vercel-labs/web-interface-guidelines/refs/heads/main/AGENT.md)

## 加入 Vercel

我们正在招聘热爱这些细节的人。[查看职位发布](https://vercel.com/careers?function=Design)。

---

感谢 [Adam](https://x.com/argyleink)、[Jimmy](https://x.com/wwwjim)、[Jonnie](https://destroytoday.com/)、[Lochie](https://x.com/lochieaxon) 和 [Paco](https://pa.co) 的反馈。